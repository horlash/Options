# F4: Docker Compose File Guide
# ─────────────────────────────────────────────────────────
# docker-compose.yml          → Production (this file): scanner + SQLite
# docker-compose.dev.yml      → Development: full stack with PostgreSQL paper trading
# docker-compose.paper.yml    → Paper trading DB only: PostgreSQL for paper_trades
#
# Usage:
#   Production:   docker compose up -d
#   Development:  docker compose -f docker-compose.dev.yml up -d
#   Paper DB:     docker compose -f docker-compose.paper.yml up -d
# ─────────────────────────────────────────────────────────
version: '3.8'

services:
  leap-scanner:
    build: .
    image: horlamy/options-scanner:1.0.1
    container_name: leap_scanner_prod
    restart: unless-stopped
    ports:
      - "5000:5000"
    volumes:
      # Persist the SQLite database
      - ./leap_scanner.db:/app/leap_scanner.db
      # Persist cached data (like tickers.json)
      - ./backend/data:/app/backend/data
      # Optional: Mount logs if you add file logging
      # - ./logs:/app/logs
    env_file:
      - .env
    environment:
      - FLASK_ENV=production
      # Ensure python functionality works well in container
      - PYTHONUNBUFFERED=1
