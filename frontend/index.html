<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEAP Options Scanner - AI-Powered Options Analysis</title>
    <link rel="stylesheet" href="css/styles.css?v=17">
    <link rel="stylesheet" href="css/components/watchlist.css?v=17">
    <link rel="stylesheet" href="css/components/scanner.css?v=17">
    <link rel="stylesheet" href="css/components/opportunities.css?v=17">
    <link rel="stylesheet" href="css/components/analysis-detail.css?v=17">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">ðŸ“ˆ</div>
                    <h1>LEAP Scanner</h1>
                </div>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-label">Watchlist</span>
                        <span class="stat-value" id="watchlist-count">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Opportunities</span>
                        <span class="stat-value" id="opportunities-count">0</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Control Panel -->
            <section class="control-panel">
                <div class="panel-card">
                    <h2>Scan Control</h2>
                    <div class="scan-mode-toggle">
                        <button id="mode-0dte" class="btn btn-mode" style="background: linear-gradient(135deg, #ff4d4d, #c62828); border-color: #ff4d4d;">âš¡ 0DTE (Today)</button>
                        <button id="mode-weekly-0" class="btn btn-mode active">This Week</button>
                        <button id="mode-weekly-1" class="btn btn-mode">Next Week</button>
                        <button id="mode-weekly-2" class="btn btn-mode">Next 2 Weeks</button>
                        <button id="mode-leaps" class="btn btn-mode">Leaps</button>
                    </div>
                    <!-- Run Scan button removed as requested -->
                    <div id="scan-progress" class="scan-progress hidden">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <p id="progress-text" class="progress-text">Scanning watchlist...</p>
                    </div>
                </div>

                <div class="panel-card">
                    <h2>Recent History</h2>
                    <div id="search-history" class="history-list">
                        <!-- History items -->
                        <div class="empty-state-small">No recent searches</div>
                    </div>
                </div>



                <div class="panel-card">
                    <h2>Smart Search</h2>
                    <form id="quick-scan-form" class="ticker-form" autocomplete="off" style="position: relative;">
                        <input type="text" id="quick-scan-input" class="input-field"
                            placeholder="Search Ticker (e.g. NVDA, AAPL)" autocomplete="off">

                        <!-- Floating Autocomplete List -->
                        <div id="autocomplete-list" class="autocomplete-list" style="z-index: 9999;"></div>

                        <button type="button" class="btn btn-primary"
                            onclick="scanner.scanTicker(document.getElementById('quick-scan-input').value)">
                            Scan
                        </button>
                    </form>
                </div>

                <div class="panel-card">
                    <h2>Sector Scan</h2>
                    <div class="sector-controls" style="display: flex; flex-direction: column; gap: 10px;">
                        <select id="sector-select" class="select-field">
                            <option value="">Select Sector...</option>
                            <option value="Technology">Technology</option>
                            <option value="Financial Services">Financial Services</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Consumer Cyclical">Consumer Cyclical</option>
                            <option value="Consumer Defensive">Consumer Defensive</option>
                            <option value="Energy">Energy</option>
                            <option value="Industrials">Industrials</option>
                            <option value="Communication Services">Communication Services</option>
                            <option value="Basic Materials">Basic Materials</option>
                            <option value="Real Estate">Real Estate</option>
                            <option value="Utilities">Utilities</option>
                        </select>

                        <select id="industry-select" class="select-field" style="display: none; margin-top: 10px;">
                            <option value="">Any Subsector</option>
                        </select>

                        <div style="display: flex; gap: 10px;">
                            <select id="cap-select" class="select-field"
                                style="flex: 1; width: 50%; padding: 6px 12px;">
                                <option value="0">Any Cap</option>
                                <option value="200000000000">Mega (>200B)</option>
                                <option value="10000000000">Large (>10B)</option>
                                <option value="2000000000">Mid (>2B)</option>
                            </select>

                            <select id="vol-select" class="select-field"
                                style="flex: 1; width: 50%; padding: 6px 12px;">
                                <option value="0">Any Vol</option>
                                <option value="1000000">High (>1M)</option>
                                <option value="500000">Med (>500k)</option>
                            </select>
                        </div>

                        <button id="btn-sector-scan" class="btn btn-secondary full-width-btn">
                            Scan Top Picks
                        </button>
                    </div>
                </div>
            </section>

            <style>
                .source-badge {
                    font-size: 0.7rem;
                    padding: 2px 6px;
                    border-radius: 4px;
                    margin-left: 8px;
                    font-weight: 500;
                    text-transform: uppercase;
                }

                .source-schwab {
                    background: #00a0dd;
                    color: white;
                }

                .source-tradier {
                    background: #0066cc;
                    color: white;
                }

                .source-yahoo {
                    background: #6e00ff;
                    color: white;
                }

                .header-top {
                    display: flex;
                    align-items: center;
                }
            </style>

            <!-- Watchlist Dashboard Row -->
            <section class="watchlist-dashboard-row">
                <!-- Add to Watchlist -->
                <div class="panel-card watchlist-add-card">
                    <h2>Add to Watchlist</h2>
                    <form id="watchlist-add-form" class="ticker-form" autocomplete="off" style="position: relative;">
                        <input type="text" id="watchlist-input" class="input-field" placeholder="Add Ticker (e.g. AMD)"
                            autocomplete="off">

                        <!-- Floating Autocomplete List for Watchlist -->
                        <div id="watchlist-autocomplete-list" class="autocomplete-list" style="z-index: 9999;"></div>

                        <button type="button" id="btn-add-watchlist" class="btn btn-primary">
                            Add
                        </button>
                    </form>
                </div>

                <!-- My Watchlist Panel -->
                <div class="panel-card watchlist-list-card">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <h2 style="margin: 0; font-size: 1.25rem;">My Watchlist</h2>
                        <span
                            style="background: rgba(255,255,255,0.1); padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">
                            <span id="watchlist-count-display">0</span>/30
                        </span>
                    </div>
                    <div id="watchlist-container" class="watchlist-grid">
                        <!-- Watchlist items will be inserted here -->
                        <div class="empty-state-small">Watchlist is empty</div>
                    </div>
                </div>
            </section>

            <!-- Opportunities Section -->
            <section class="opportunities-section">
                <div class="section-header">
                    <h2>Opportunities <span id="opportunities-mode-label"
                            style="font-size: 1.25rem; color: #94a3b8; font-weight: 400; margin-left: 10px;">Leaps</span>
                        <span id="opportunities-ticker-price"
                            style="font-size: 1rem; margin-left: 15px; background-color: #2196f3; color: white; padding: 4px 12px; border-radius: 20px; font-weight: 600; display: none; vertical-align: middle;"></span>

                        <!-- Profit Filters -->
                        <div class="profit-filters"
                            style="display: inline-flex; gap: 8px; margin-left: 20px; vertical-align: middle;">
                            <button class="btn-filter" data-value="15">>15%</button>
                            <button class="btn-filter" data-value="25">>25%</button>
                            <button class="btn-filter" data-value="35">>35%</button>
                        </div>
                    </h2>
                    <p class="section-subtitle">High-potential options based on your scan criteria</p>
                    <div class="filter-controls">
                        <select id="ticker-filter" class="select-field">
                            <option value="all">All Tickers</option>
                        </select>
                        <select id="sort-select" class="select-field">
                            <option value="score">Sort by Score</option>
                            <option value="profit">Sort by Profit Potential</option>
                            <option value="expiry">Sort by Expiry</option>
                        </select>
                    </div>
                </div>
                <div id="opportunities-container" class="opportunities-grid">
                    <!-- Opportunity cards will be inserted here -->
                </div>
            </section>

            <!-- Detailed Analysis Modal -->
            <div id="analysis-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <button class="modal-close" id="close-modal">&times;</button>
                    <div id="analysis-detail">
                        <!-- Detailed analysis will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="js/utils/api.js?v=17"></script>
    <script src="js/utils/toast.js?v=17"></script>
    <script src="js/utils/charts.js?v=17"></script>
    <script src="js/components/watchlist.js?v=17"></script>
    <script src="js/components/scanner.js?v=17"></script>
    <script src="js/components/opportunities.js?v=17"></script>
    <script src="js/components/analysis-detail.js?v=17"></script>
    <script src="js/app.js?v=17"></script>
</body>

</html>